(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{434:function(a,e,t){"use strict";t.r(e);var s=t(2),r=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h3",{attrs:{id:"_1-有则update-无则insert"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-有则update-无则insert"}},[a._v("#")]),a._v(" 1 有则update - 无则insert")]),a._v(" "),e("p",[a._v("使用这个必须要有主键 ON DUPLICATE KEY UPDATE")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("INSERT INTO table (a,b,c) VALUES (1,2,3)\n  ON DUPLICATE KEY UPDATE c=4\n")])])]),e("h5",{attrs:{id:"_1-1-简单使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-简单使用"}},[a._v("#")]),a._v(" 1.1 简单使用")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('  insert into `enterprise_rectification_details`\n    <trim prefix="(" suffix=")" suffixOverrides=",">\n      <if test="id != null">\n        `id`,\n      </if>\n    </trim>\n    values\n    <trim prefix="(" suffix=")" suffixOverrides=",">\n      <if test="id != null">\n        #{id,jdbcType=BIGINT},\n      </if>\n    </trim>\n    on duplicate key update \n    <trim suffixOverrides=",">\n      <if test="id != null">\n        `id` = #{id,jdbcType=BIGINT},\n      </if>\n    </trim>\n  </insert>\n')])])]),e("h5",{attrs:{id:"_1-2-list集合的情况下使用mybatis配合on-duplicate-key-update"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-list集合的情况下使用mybatis配合on-duplicate-key-update"}},[a._v("#")]),a._v(" 1.2 list集合的情况下使用mybatis配合ON DUPLICATE KEY UPDATE")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('<insert id="insertOrUpdateCameraInfoByBatch" parameterType="java.util.List">\n      insert into camera_info(\n          zone1Id,zone1Name,zone2Id,zone2Name,zone3Id,zone3Name,zone4Id,zone4Name,\n          cameraId\n          )VALUES\n           <foreach collection ="list" item="cameraInfo" index= "index" separator =",">\n             (\n                #{cameraInfo.zone1Id}, #{cameraInfo.zone1Name}, #{cameraInfo.zone2Id},\n                #{cameraInfo.zone2Name}, #{cameraInfo.zone3Id}, #{cameraInfo.zone3Name},\n                #{cameraInfo.zone4Id}, #{cameraInfo.zone4Name}, \n                #{cameraInfo.cameraId}, \n             )\n           </foreach>\n           ON DUPLICATE KEY UPDATE\n          car_icon_id=values(carIconId), car_alias=values(carAlias)\n    </insert>\n')])])]),e("h3",{attrs:{id:"_2-mysql时间查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-mysql时间查询"}},[a._v("#")]),a._v(" 2 MySQL时间查询")]),a._v(" "),e("p",[a._v("查询最近7天，一个月，一年的数据")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("select * from bd_disaster_warning  where DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= date(format_time);\nselect * from bd_disaster_warning  where DATE_SUB(CURDATE(), INTERVAL 1 MONTH) <= date(format_time);\nselect * from bd_disaster_warning  where DATE_SUB(CURDATE(), INTERVAL 1 YEAR) <= date(format_time);\n")])])]),e("h3",{attrs:{id:"_3-提取geometry数据中心的一个点数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-提取geometry数据中心的一个点数据"}},[a._v("#")]),a._v(" 3 提取geometry数据中心的一个点数据")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("update tb_nzw_cybchjc set lon =st_X(ST_Centroid(geom)), lat=st_y(st_centroid(geom))\n")])])]),e("h3",{attrs:{id:"_4-mysql默认时间"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-mysql默认时间"}},[a._v("#")]),a._v(" 4 MySQL默认时间")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("CURRENT_TIMESTAMP\n")])])]),e("h3",{attrs:{id:"_5手动拼接sql循环插入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5手动拼接sql循环插入"}},[a._v("#")]),a._v(" 5手动拼接SQL循环插入")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('<insert id="saveBatch” parameterType="java.util.List">\n\t<foreach collection="list" item="item" index="index" separator=",">\n\t\t(#(item.a), #(item.b),#litem.c, #item.d), #/item.el, #(item.f), #item.gh, #item.h), #/item.i), #(item.j), #(item.k)\n\t</foreach>\n</insert>\n')])])]),e("h3",{attrs:{id:"_6-时间格式转换"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-时间格式转换"}},[a._v("#")]),a._v(" 6 时间格式转换")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("DATE_FORMAT(create_time, '%Y-%m-%d %H:%i:%s') AS create_time\n")])])]),e("h3",{attrs:{id:"_7-判断是否存在返回boolean"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-判断是否存在返回boolean"}},[a._v("#")]),a._v(" 7 判断是否存在返回Boolean")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('<select id="isQuoteAccountingBoundary" resultType="java.lang.Boolean">\n    SELECT CASE WHEN COUNT(1) > 0 THEN true ELSE false END AS isQuote\n    FROM carbon_calculate_task\n    WHERE accounting_boundary_id = #{id}\n</select>\n')])])])])}),[],!1,null,null,null);e.default=r.exports}}]);